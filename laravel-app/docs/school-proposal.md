# 学校図書管理システム 導入提案資料

---

## 1. このシステムについて

学校の図書室の蔵書管理・貸出管理をWeb上で行えるシステムです。
スマートフォン・タブレット・PCから、いつでもどこでもアクセスできます。

### 主な機能
- **書籍検索**: タイトル・著者名で蔵書を検索
- **貸出・返却**: ボタン1つで貸出手続き、マイページで返却確認
- **書籍登録**: ISBNコードを入力するだけで書籍情報を自動取得して登録
- **貸出管理**: 管理者は全生徒の貸出状況を一覧で確認
- **延滞検知**: 返却期限を過ぎた貸出を自動で検知

### 利用者の種類

| 利用者 | できること |
|---|---|
| 生徒・教員 | 書籍の検索・閲覧・貸出・返却 |
| 図書担当（管理者） | 上記に加え、書籍登録・全貸出の管理 |

---

## 2. 費用について

### 現在の費用: 0円（すべて無料）

| サービス | 用途 | 費用 |
|---|---|---|
| Render | アプリの動作するサーバー | **無料** |
| Neon | データベース（書籍・貸出データの保存） | **無料** |
| GitHub | ソースコード管理・自動デプロイ | **無料** |
| Google Books API | ISBN検索（書籍情報の自動取得） | **無料** |

### 現在の無料プランの制限

| 項目 | 制限内容 | 実際の影響 |
|---|---|---|
| サーバー（Render） | 15分間アクセスがないとスリープ状態になる | 次のアクセスで自動復帰するが、約30秒待つ必要がある |
| データベース（Neon） | 500MBまで | 約10万冊+100万件の貸出記録が保存可能。学校規模では十分 |
| URL | `library-ldcn.onrender.com` | 学校独自のURLにしたい場合は別途ドメインが必要 |

### お金がかかるケースと費用の目安

#### ケース1: スリープをなくしたい場合
- **理由**: 15分アクセスがないと休止し、再アクセス時に30秒ほど待つ
- **対策A（無料）**: UptimeRobotという無料サービスで定期的にアクセスし、スリープを防止できる
- **対策B（有料）**: Renderの有料プラン → **月額約1,100円（$7/月）**

#### ケース2: 独自ドメインを使いたい場合
- **例**: `library.学校名.jp` のようなURLにしたい場合
- **費用**: ドメイン取得・維持費 → **年額1,000〜3,000円程度**
- ※Render側でのドメイン設定自体は無料

#### ケース3: データベース容量が足りなくなった場合
- **現在の上限**: 500MB（約10万冊分）
- **有料プラン**: 月額約3,000円（$19/月）で10GBに拡張
- ※学校図書の規模（数千冊程度）であれば、**無料枠を超えることはほぼない**

#### 費用まとめ

| シナリオ | 月額費用 | 年額費用 |
|---|---|---|
| **すべて無料で運用**（現状） | 0円 | 0円 |
| スリープ防止のみ（UptimeRobot使用） | 0円 | 0円 |
| スリープ防止（Render有料） | 約1,100円 | 約13,200円 |
| 独自ドメインのみ | 0円 | 1,000〜3,000円 |
| スリープ防止＋独自ドメイン | 約1,100円 | 約16,000円 |

**結論: 現状のまま完全無料で運用可能。有料にするかは使い勝手の好みによる。**

---

## 3. セキュリティについて

| 対策 | 内容 |
|---|---|
| 通信の暗号化 | HTTPS通信（SSL）で全データを暗号化 |
| 権限管理 | 書籍登録・貸出管理は管理者のみ操作可能 |
| パスワード保護 | パスワードはハッシュ化して保存（平文では保存しない） |
| 入力値の検証 | 不正な入力（SQLインジェクション等）を防止 |
| エラー情報の非公開 | 本番環境ではシステムの内部情報を表示しない |

### 保存されるデータ
- ユーザー情報: 名前、メールアドレス、パスワード（暗号化済み）
- 書籍情報: タイトル、著者、ISBN、出版社、説明文、表紙画像URL
- 貸出記録: 誰が、何を、いつ借りて、いつ返したか

### データの保管場所
- データベースはNeon（Amazon Web Services シンガポールリージョン）に保管
- 7日間の自動バックアップあり

---

## 4. 運用に必要な作業

### 日常の運用（ほぼ手間なし）
| 作業 | 頻度 | 担当 |
|---|---|---|
| 新しい書籍の登録 | 書籍が増えた時 | 図書担当 |
| 貸出状況の確認 | 随時 | 図書担当 |
| 延滞の確認・対応 | 週1回程度 | 図書担当 |

### システムの保守
| 作業 | 頻度 | 備考 |
|---|---|---|
| サーバーの管理 | 不要 | Renderが自動で管理 |
| データベースのバックアップ | 自動 | Neonが7日間自動保持 |
| セキュリティアップデート | 年数回 | 開発者がコードを更新してGitHubにpush |

---

## 5. 導入の流れ

### すでに完了していること
1. システムの開発
2. サーバーへのデプロイ（Render）
3. データベースの設定（Neon）
4. HTTPS（SSL）の設定

### 導入に必要な作業
1. **管理者アカウントの作成**（10分程度）
   - 図書担当の先生がアカウントを登録
   - データベースで管理者権限を付与
   - 詳細は `docs/admin-setup.md` を参照

2. **蔵書の登録**（冊数による）
   - ISBNコードを入力するだけで書籍情報が自動取得される
   - 1冊あたり30秒〜1分程度

3. **生徒への周知**
   - URLを共有するだけでアクセス可能
   - アプリのインストールは不要（ブラウザでアクセス）

---

## 6. よくある質問

### Q: スマートフォンで使えますか？
A: はい。ブラウザ（Chrome, Safari等）からアクセスするだけで使えます。アプリのインストールは不要です。

### Q: 生徒が勝手に書籍を登録・削除できますか？
A: できません。書籍の登録は管理者のみが行えます。

### Q: インターネットがない環境でも使えますか？
A: インターネット接続が必要です。校内Wi-Fiがあれば利用可能です。

### Q: データが消えることはありますか？
A: データベースは7日間の自動バックアップがあります。万が一の場合も復旧可能です。

### Q: 同じ本が複数冊ある場合はどうしますか？
A: 同じISBNで複数回登録できます。システムが自動で「冊1」「冊2」と番号を振り、どの冊が貸出中か個別に追跡できます。物理的な本にはシール等で番号を貼ると管理しやすいです。

### Q: 将来的にサービスが終了したらどうなりますか？
A: ソースコードはGitHubに保存されています。別のサーバーに移行することが可能です。データベースのデータもエクスポートできます。

---

## 7. デモ

現在のアプリURL: **https://library-ldcn.onrender.com**

- 閲覧は誰でも可能（ログイン不要）
- 貸出機能を試すにはアカウント登録が必要
