# 図書館カラーパレット改善 - 要件定義書

## はじめに

現在の図書館管理システムで使用されている黄緑ベースのカラーパレットを、より視認性が高く、図書館らしい落ち着いた印象を与える新しいカラーパレットに変更します。コーラルレッド、スチールブルー、自然な緑の3色を基調とした統一感のあるデザインシステムを構築します。

## 要件

### 要件1: 新しいカラーパレットの適用

**ユーザーストーリー:** 図書館利用者として、視認性が高く統一感のあるカラーパレットでシステムを利用したい。そうすることで、より快適にシステムを操作できる。

#### 受入基準
1. WHEN システムの任意のページが表示される THEN メインカラーとしてスチールブルー（#3D7CA3）が使用される
2. WHEN 重要なアクション（エラー、警告）が表示される THEN コーラルレッド（#E3595B）が使用される
3. WHEN 成功メッセージや利用可能状態が表示される THEN 自然な緑（#669C6F）が使用される
4. WHEN ボタンやリンクにホバーした時 THEN 適切な濃淡の色に変化する
5. WHEN 現在の黄緑色が使用されていた箇所 THEN 新しい緑色（#669C6F）に置き換えられる

### 要件2: 書籍一覧ページのカラー更新

**ユーザーストーリー:** 図書館利用者として、書籍一覧ページで新しいカラーパレットを使用した見やすいインターフェースを利用したい。

#### 受入基準
1. WHEN 書籍一覧ページが表示される THEN 検索ボタンと書籍登録ボタンがスチールブルー（#3D7CA3）で表示される
2. WHEN 書籍の利用可能状態が表示される THEN 自然な緑（#669C6F）で「利用可能」が表示される
3. WHEN 書籍の貸出中状態が表示される THEN コーラルレッド（#E3595B）で「貸出中」が表示される
4. WHEN 成功メッセージが表示される THEN 自然な緑（#669C6F）の背景色で表示される
5. WHEN リンクやボタンにホバーした時 THEN 適切な濃淡の色に変化する

### 要件3: 書籍登録ページのカラー更新

**ユーザーストーリー:** 図書館管理者として、書籍登録ページで新しいカラーパレットを使用した統一感のあるインターフェースを利用したい。

#### 受入基準
1. WHEN 書籍登録ページが表示される THEN フォーカス状態の入力フィールドがスチールブルー（#3D7CA3）の枠線で表示される
2. WHEN ISBN検索ボタンと登録ボタンが表示される THEN スチールブルー（#3D7CA3）の背景色で表示される
3. WHEN ISBN検索が成功した時 THEN 自然な緑（#669C6F）の成功メッセージが表示される
4. WHEN ISBN検索が失敗した時 THEN コーラルレッド（#E3595B）のエラーメッセージが表示される
5. WHEN バリデーションエラーが発生した時 THEN コーラルレッド（#E3595B）でエラーメッセージが表示される

### 要件4: 書籍詳細ページのカラー更新

**ユーザーストーリー:** 図書館利用者として、書籍詳細ページで新しいカラーパレットを使用した読みやすいインターフェースを利用したい。

#### 受入基準
1. WHEN 書籍詳細ページが表示される THEN 戻るリンクがスチールブルー（#3D7CA3）で表示される
2. WHEN 書籍が利用可能な時 THEN 「借りる」ボタンがスチールブルー（#3D7CA3）で表示される
3. WHEN 書籍の利用可能状態が表示される THEN 自然な緑（#669C6F）で「利用可能」が表示される
4. WHEN 書籍の貸出中状態が表示される THEN コーラルレッド（#E3595B）で「貸出中」が表示される
5. WHEN 関連書籍のリンクが表示される THEN スチールブルー（#3D7CA3）で表示される

### 要件5: マイページのカラー更新

**ユーザーストーリー:** 図書館利用者として、マイページで新しいカラーパレットを使用した分かりやすいインターフェースを利用したい。

#### 受入基準
1. WHEN マイページが表示される THEN 貸出中の書籍リストが新しいカラーパレットで表示される
2. WHEN 返却ボタンが表示される THEN スチールブルー（#3D7CA3）の背景色で表示される
3. WHEN 返却が成功した時 THEN 自然な緑（#669C6F）の成功メッセージが表示される
4. WHEN 返却期限が近い書籍がある時 THEN コーラルレッド（#E3595B）で警告表示される
5. WHEN 書籍詳細へのリンクが表示される THEN スチールブルー（#3D7CA3）で表示される

### 要件6: ナビゲーションとレイアウトのカラー更新

**ユーザーストーリー:** 図書館利用者として、ナビゲーションメニューで新しいカラーパレットを使用した統一感のあるインターフェースを利用したい。

#### 受入基準
1. WHEN ナビゲーションメニューが表示される THEN アクティブなリンクがスチールブルー（#3D7CA3）で表示される
2. WHEN ナビゲーションリンクにホバーした時 THEN スチールブルーの濃い色に変化する
3. WHEN ログアウトボタンが表示される THEN 適切な色（グレー系）で表示される
4. WHEN ページタイトルが表示される THEN 統一感のある色で表示される
5. WHEN フッター情報が表示される THEN 適切な色で表示される

### 要件7: アクセシビリティとコントラスト比の確保

**ユーザーストーリー:** 視覚に障害のある利用者として、十分なコントラスト比を持つカラーパレットでシステムを利用したい。

#### 受入基準
1. WHEN テキストと背景色の組み合わせが表示される THEN WCAG 2.1 AA基準のコントラスト比（4.5:1以上）を満たす
2. WHEN ボタンやリンクが表示される THEN 十分なコントラスト比を持つ色で表示される
3. WHEN エラーメッセージが表示される THEN 色だけでなくアイコンやテキストでも情報を伝える
4. WHEN 成功メッセージが表示される THEN 色だけでなくアイコンやテキストでも情報を伝える
5. WHEN フォーカス状態が表示される THEN 明確に識別できる色とスタイルで表示される

### 要件8: 保守性の高いデザインシステムの構築

**ユーザーストーリー:** 開発者として、保守性が高く拡張しやすいデザインシステムを構築したい。そうすることで、将来的な変更や新機能追加が効率的に行える。

#### 受入基準
1. WHEN 新しいページやコンポーネントが追加される THEN 既存のデザインシステムクラスを再利用できる
2. WHEN カラーパレットを変更する必要がある THEN CSS変数またはTailwind設定の変更のみで全体に反映される
3. WHEN 同じスタイルの要素が複数存在する THEN 重複したCSSコードではなく共通クラスが使用される
4. WHEN デザインの一貫性を保つ必要がある THEN 統一されたスペーシング、フォントサイズ、角の丸みが適用される
5. WHEN コードレビューを行う時 THEN インラインスタイルではなく意味のあるクラス名が使用されている

### 要件9: 統一されたスタイルコンポーネントシステム

**ユーザーストーリー:** 開発者として、同じ色やスタイルを使用する箇所で統一されたCSSクラスを使用したい。そうすることで、保守性が高く一貫性のあるデザインを実現できる。

#### 受入基準
1. WHEN 同じ色を使用する要素が複数存在する THEN 共通のCSSクラス（例：btn-primary、text-success）が使用される
2. WHEN ボタン要素が表示される THEN 統一されたボタンクラス（btn-primary、btn-secondary、btn-danger）が使用される
3. WHEN カード要素が表示される THEN 統一されたカードクラス（card、card-header、card-body）が使用される
4. WHEN メッセージ要素が表示される THEN 統一されたアラートクラス（alert-success、alert-error、alert-info）が使用される
5. WHEN インライン要素が重複する THEN 再利用可能なユーティリティクラスが使用される

## 技術制約

- 既存のTailwind CSSクラスを活用
- カスタムCSSコンポーネントクラスを作成して再利用性を向上
- レスポンシブデザインを維持
- 既存の機能に影響を与えない
- ブラウザ互換性を維持
- パフォーマンスを考慮したCSS最適化

## カラーパレット仕様

### メインカラー
- **プライマリ**: #3D7CA3 (スチールブルー)
- **セカンダリ**: #669C6F (自然な緑)
- **アクセント**: #E3595B (コーラルレッド)

### 派生カラー
- **プライマリホバー**: #2A5A7A (プライマリの暗い版)
- **セカンダリホバー**: #4A7A4F (セカンダリの暗い版)
- **アクセントホバー**: #C4434B (アクセントの暗い版)

### 用途別カラー
- **成功**: #669C6F (自然な緑)
- **エラー**: #E3595B (コーラルレッド)
- **警告**: #F59E0B (アンバー)
- **情報**: #3D7CA3 (スチールブルー)

## スタイルコンポーネント仕様

### ボタンクラス
```css
.btn-primary {
  background-color: #3D7CA3;
  hover: #2A5A7A;
  transition: all 0.2s ease;
  border-radius: 0.5rem;
  padding: 0.75rem 1.5rem;
  font-weight: 500;
}

.btn-secondary {
  background-color: #669C6F;
  hover: #4A7A4F;
}

.btn-danger {
  background-color: #E3595B;
  hover: #C4434B;
}
```

### カードクラス
```css
.card {
  background: white;
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: box-shadow 0.2s ease;
}

.card:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}
```

### アラートクラス
```css
.alert-success {
  background-color: rgba(102, 156, 111, 0.1);
  border: 1px solid #669C6F;
  color: #4A7A4F;
}

.alert-error {
  background-color: rgba(227, 89, 91, 0.1);
  border: 1px solid #E3595B;
  color: #C4434B;
}
```

### デザインシステム要素
- **角の丸み**: 0.5rem (標準), 0.75rem (カード)
- **影**: 軽い影 (hover前), 深い影 (hover後)
- **トランジション**: 0.2s ease (標準)
- **フォントウェイト**: 400 (通常), 500 (ボタン), 600 (見出し)
- **スペーシング**: 0.75rem (ボタンパディング), 1.5rem (カードパディング)